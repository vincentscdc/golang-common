<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# otelinit

```go
import "github.com/monacohq/golang-common/monitoring/otelinit"
```

This package allows you to init and enable tracing in your app

<details><summary>Example (Init Provider Collector)</summary>
<p>

Initialize a otel provider with a collector

```go
{
	ctx := context.Background()

	shutdown, err := InitProvider(
		ctx,
		"simple-gohttp",
		WithGRPCTraceExporter(
			ctx,
			fmt.Sprintf("%s:%d", "127.0.0.1", 4317),
		),
	)
	if err != nil {
		log.Println("failed to initialize opentelemetry")

		return
	}

	defer func() {
		if err := shutdown(); err != nil {
			log.Println("failed to shutdown")
		}
	}()
}
```

</p>
</details>

<details><summary>Example (Init Provider Discard Traces)</summary>
<p>

Initialize a otel provider and discard traces useful for dev

```go
{
	ctx := context.Background()

	shutdown, err := InitProvider(
		ctx,
		"simple-gohttp",
		WithWriterTraceExporter(io.Discard),
	)
	if err != nil {
		log.Println("failed to initialize opentelemetry")

		return
	}

	defer func() {
		if err := shutdown(); err != nil {
			log.Println("failed to shutdown")
		}
	}()
}
```

</p>
</details>

## Index

- [func InitProvider(ctx context.Context, serviceName string, options ...func(*provider) error) (func() error, error)](<#func-initprovider>)
- [func WithBatchSize(size int) func(*provider) error](<#func-withbatchsize>)
- [func WithGRPCTraceExporter(ctx context.Context, collectorTarget string) func(*provider) error](<#func-withgrpctraceexporter>)
- [func WithWriterTraceExporter(w io.Writer) func(*provider) error](<#func-withwritertraceexporter>)


## func [InitProvider](<https://github.com/monacohq/golang-common/blob/main/monitoring/otelinit/otelinit.go#L9-L13>)

```go
func InitProvider(ctx context.Context, serviceName string, options ...func(*provider) error) (func() error, error)
```

## func [WithBatchSize](<https://github.com/monacohq/golang-common/blob/main/monitoring/otelinit/batch.go#L6>)

```go
func WithBatchSize(size int) func(*provider) error
```

WithBatchSize allows you to modify the batch size before it is sent

## func [WithGRPCTraceExporter](<https://github.com/monacohq/golang-common/blob/main/monitoring/otelinit/collector.go#L13>)

```go
func WithGRPCTraceExporter(ctx context.Context, collectorTarget string) func(*provider) error
```

WithGRPCTraceExporter allows you to send your traces to the collector target collectorTarget is the address of the collector\, e\.g\. "127\.0\.0\.1:4317"

## func [WithWriterTraceExporter](<https://github.com/monacohq/golang-common/blob/main/monitoring/otelinit/iowriter.go#L12>)

```go
func WithWriterTraceExporter(w io.Writer) func(*provider) error
```

WithWriterTraceExporter allows you to push all traces to an io\.Writer you can use io\.Discard if you don't want to be bothered by these



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
